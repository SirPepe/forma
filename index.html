<!DOCTYPE html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Document</title>
<script src="./src/index.js" type="module"></script>
<script type="module">
document.documentElement.addEventListener("click", ({ target }) => {
  if (target.matches("button.toggleFieldset")) {
    const fs = document.querySelector("fieldset");
    if (fs.disabled) {
      fs.disabled = false;
      target.innerHTML = "Disable fieldset"
    } else {
      fs.disabled = true;
      target.innerHTML = "Enable fieldset"
    }
  }
  if (target.matches("button.toggleReadonly")) {
    for (element of document.querySelector("form").elements) {
      element.readonly = !element.readonly;
    }
  }
});
</script>
<style>
label > * {
  display: inline-block;
  background: #CCC;
  padding: 0.25em;
  border-radius: 0.1em;
}
</style>

<h2>Test</h2>

<form>
  <fieldset>
    <legend>Fieldset</legend>
    <p>
      <label>
        Integer input:
        <br>
        <integer-input required name="int" value="7"></integer-input>
      </label>
    </p>
    <p>
      <label>
        Color plus alpha:
        <br>
        <color-picker value="#CC0000EE" required name="color"></color-picker>
      </label>
    </p>
    <p>
      <label>
        Bad date picker:
        <br>
        <bad-date-picker value="2001-11-09" required name="date"></bad-date-picker>
      </label>
    </p>
  </fieldset>
  <p>
    <input type="submit" value="Submit">
    <input type="reset" value="Reset">
    <button type="button" class="toggleFieldset">Disable fieldset</button>
    <button type="button" class="toggleReadonly">Toggle readonly</button>
  </p>
</form>

<script>
// Custom Error-UX fÃ¼r native und non-native form-associated elements!
// document.body.addEventListener("invalid", (evt) => {
//   evt.preventDefault(); // native Fehleranzeige stopppen
//   alert(evt.target.validationMessage); // DIY-Anzeige
// }, { capture: true }); // invalid-Events bubblen nicht
</script>
